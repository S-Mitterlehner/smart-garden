query getModules($group: ModuleGroup!) {
  modules(group: $group) {
    id
    name
    description
    key
    type
    group
    isActuator
    isSensor
  }
}

query getModuleById($id: UUID!) {
  module(id: $id) {
    id
    key
    name
    description
    type
    group
    isActuator
    isSensor
    state {
      moduleKey
      moduleType
      connectionState
      stateType
      state
      value
      min
      max
      unit
      lastUpdate
      actions {
        key
        name
        description
        type
        isAllowed
        icon
        currentValue
        min
        max
        increment
        unit
      }
    }
  }
}


query getModulesInformation {
  modulesInformation(where: { isActuator: { eq: true } }) {
    description
    group
    id
    isActuator
    key
    name
    type
    state {
      actions {
        description
        icon
        increment
        isAllowed
        key
        max
        min
        name
        type
        unit
      }
    }
    isSensor
  }
}

mutation updateModule($id: ID!, $name: String, $description: String) {
  updateModuleRef(input: { id: $id, name: $name, description: $description }) {
    moduleRefDto {
      id
      name
      description
      key
      type
      group
      isActuator
      isSensor
    }
  }
}

mutation executeAction($id: ID!, $actionKey: String!, $value: Float) {
  executeModuleAction(input: { id: $id, actionKey: $actionKey, value: $value }) {
    boolean
  }
}

subscription listenStateChange($key: String!, $type: ModuleType!) {
  onModuleStateChanged(key: $key, type: $type) {
    moduleKey
    moduleType
    connectionState
    lastUpdate
    max
    min
    state
    stateType
    unit
    value
    actions {
      currentValue
      description
      icon
      increment
      isAllowed
      key
      max
      min
      name
      type
      unit
    }
  }
}
