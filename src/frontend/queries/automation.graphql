query getAutomationConfig($id: UUID!) {
  automationConfig(bedId: $id) {
    parameters {
      key
      label
      fields {
        key
        label
        max
        min
        tsType
        unit
        valueType
        values {
          label
          value
        }
      }
    }
  }
}

query getRulesFromBed($bedId: UUID!) {
  rules(bedId: $bedId) {
    bedId
    expressionJson
    id
    isEnabled
    name
    actions {
      actionKey
      id
      moduleId
      moduleKey
      moduleType
      order
      ruleId
      value
    }
  }
}


query getRuleById($ruleId: UUID!) {
  rule(ruleId: $ruleId) {
    bedId
    expressionJson
    id
    isEnabled
    name
    actions {
      actionKey
      id
      moduleId
      moduleKey
      moduleType
      order
      ruleId
      value
    }
  }
}


mutation addAutomationRuleActionToModule($actionKey: String!, $automationRuleId: UUID!, $moduleId: UUID!, $value: Float) {
  addAutomationRuleActionToModule(
    input: { actionKey: $actionKey, automationRuleId: $automationRuleId, moduleId: $moduleId, value: $value }
  ) {
    automationRuleActionDto {
      actionKey
      id
      moduleId
      moduleKey
      moduleType
      order
      ruleId
      value
    }
  }
}


mutation updateAutomationRuleActionFromModule($id: UUID!, $actionKey: String, $moduleId: UUID!, $ruleId: UUID!, $value: Float) {
  updateAutomationRuleActionFromModule(
    input: {
      automationRuleActionDto: { actionKey: $actionKey, moduleId: $moduleId, id: $id, ruleId: $ruleId, value: $value }
    }
  ) {
    automationRuleActionDto {
      actionKey
      id
      moduleId
      moduleKey
      moduleType
      order
      ruleId
      value
    }
  }
}


mutation addAutomationRuleToBed($bedId: UUID!, $expressionJson: String!, $name: String!, $isEnabled: Boolean!) {
  addAutomationRuleToBed(
    input: { bedId: $bedId, automationExpressionJson: $expressionJson, automationName: $name, isEnabled: $isEnabled }
  ) {
    automationRuleDto {
      bedId
      expressionJson
      id
      name
      isEnabled
    }
  }
}

mutation updateAutomationRuleFromBed($bedId: UUID!, $expressionJson: String!, $id: UUID!, $name: String!, $isEnabled: Boolean!) {
  updateAutomationRuleFromBed(
    input: {
      automationRuleDto: {
        bedId: $bedId,
        expressionJson: $expressionJson,
        id: $id,
        name: $name,
        isEnabled: $isEnabled 
      }
    }
  ) {
    automationRuleDto {
      bedId
      expressionJson
      id
      name
      isEnabled
    }
  }
}